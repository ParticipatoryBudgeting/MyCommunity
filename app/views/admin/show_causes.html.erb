<h2>Lista projektów (<%=h @causes.empty? ? "Brak projektów" : @causes.size %>)</h2>

<%= link_to 'Utwórz projekt', new_cause_path %>

<% form_tag show_causes_path, :method => :get do %>
	<%= label_tag "Autor" %>
	<%= text_field_tag (:author, params[:author], :size => 18) %>
	<%= label_tag "Tytuł" %>
	<%= text_field_tag (:title, params[:title], :size => 18) %>
	<%= label_tag "Opis" %>
	<%= text_field_tag (:abstract, params[:abstract], :size => 18) %>
	<%= label_tag "Kategoria" %>
	<%= select_tag :category, options_from_collection_for_select(@categories, 'id', 'name', params[:category].to_i) %>
	<%= label_tag "Budżet" %>
	<%= select_tag :budget, options_from_collection_for_select(@budgets, 'id', 'name', params[:budget].to_i) %>
	<%= submit_tag 'Filtruj' %>
<% end %>

<% form_for :cause, :url => import_cause_path, :html => {:multipart => true} do |f| %>
  <%= label_tag "Import z CSV: " %>

  <%= f.file_field :file %>
  <%= f.submit "Upload" %>
<% end %>

<br/>

<%= render :partial => 'causes_table' %>

<script>

var createCause = function(){
  $.openPopupLayer({
    name: 'mdlBudget',
    width: 710,
    url: '/causes/new',
    success: function() {
      $('#newCauseForm input[name=name]').focus();
      $("#left").height("1500px");
      $("#inner").height("1500px");
      $(window).resize();
    }
  });
}

$(document).ready(function()
{
  $('#createCauseButton').bind('click', function() {
    createCause();
  });
});
</script>